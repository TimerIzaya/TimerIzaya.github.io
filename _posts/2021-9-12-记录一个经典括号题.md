---
layout:     post
title:      记录一个经典括号题
subtitle:   脑子没转过来，被这题绕晕了
date:       2021-9-12
author:     Timer
header-img: img/the-first.png
catalog: false
tags:
    - Algorithm


---

[678. 有效的括号字符串]: https://leetcode-cn.com/problems/valid-parenthesis-string/

### 

### 对于只有 左括号和有括号 的情况验证是否合法很简单：

遍历，遇见左括号加一分，遇见右括号减一分，全程分数必须保持在非负数，最后结果为0的话，则合法。



### 当加入*号之后：

星号的正则含义是任意字符，在这题表示可以是左右括号或者空字符。

那么可能的情况会变得非常复杂。



### 和无星情况的区别：

无星情况的分数是静态的，遍历到某一符号，分数是固定的。而有星号的话，则不固定。

**分数不是固定的数，但是可以是一个固定的区间。**



### 思路：

同样对每一个字符进行打分，如果是左括号就+1，如果是右括号就-1，如果星号，则可能是+1、-1、+0。

所以定义一个当前分数区间的最大值max和最小值min。

当遇见左括号，max++，min++

当遇见右括号，max--，min--

当遇见星号，max++，min-- （扩大可能的范围）。同时注意，分数小于0的范围不考虑，如果分数小于0了就不合法了，所以min最小只能为0。

区间不合法的情况：

1. 在遍历过程中，分数可能取到的最大值都小于0，不合法。
2. 当遍历结束，分数可能取到的最小值不是0，不合法。



代码：

```java
class Solution {
    public boolean checkValidString(String s) {
        int[] range = new int[2];

        for(char c :s.toCharArray()){
            if(c == '('){
                range[0]++;
                range[1]++;
            }else if (c == ')'){
                range[0]--;
                range[1]--;
            }else{
                range[0]--;
                range[1]++;
            }
            range[0] = Math.max(range[0], 0);
            if(range[1] < 0){
                return false;
            }
        }
        return range[0] == 0;
    }
}

```































