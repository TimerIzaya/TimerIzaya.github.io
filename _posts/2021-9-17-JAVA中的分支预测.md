---
layout:     post
title:      JAVA分支预测
subtitle:   CPU经典优化手段之一
date:       2021-9-17
author:     Timer
header-img: img/the-first.png
catalog: false
tags:
    - JAVA
    - OS



---

## 指令管道

代码最终都会转化为CPU可识别的指令，也就是机器码。

CPU跑代码原始的做法是单个processer串行处理指令，一个指令处理完了再加载下一个进行处理。

这里一个可以优化的点在于：执行一条指令有四个步骤，fetch、decode、execute、encode。指令管道就是基于这个点进行优化，它让processer在执行一个命令的同时就加载好下一条命令。

比如：

```java
int a = 0;
a += 1;
a += 2;
a += 3;			
```

相比串行执行，它只要7个时钟周期：

|        | 1    | 2    | 3    | 4    | 5    | 6    | 7    |
| ------ | ---- | ---- | ---- | ---- | ---- | ---- | ---- |
| a = 0  | F    | D    | E    | S    |      |      |      |
| a += 1 |      | F    | D    | E    | S    |      |      |
| a += 2 |      |      | F    | D    | E    | S    |      |
| a += 3 |      |      |      | F    | D    | E    | S    |







































