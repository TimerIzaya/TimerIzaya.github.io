---
layout:     post
title:      枚举到底有什么用？
subtitle:   
date:       2022-2-6
author:     Timer
header-img: img/the-first.png
catalog: false
tags:
    - JAVA

---

[TOC]



## 如果没有枚举

在Java中，我们可以通过`static final`来定义常量。例如定义周一到周日这7个常量，可以用7个不同的`int`表示：

```java
public class Weekday {
    public static final int SUN = 0;
    public static final int MON = 1;
    public static final int TUE = 2;
    public static final int WED = 3;
    public static final int THU = 4;
    public static final int FRI = 5;
    public static final int SAT = 6;
}
```

使用常量的时候，可以这么引用：

```java
if (day == Weekday.SAT || day == Weekday.SUN) {
    //...
}
```

## 

## 可能出现的问题

```java
if (weekday == 6 || weekday == 7) {
    if (tasks == Weekday.MON) {
        // TODO:
    }
}
```

这个时候有一个严重的问题就是，编译器无法检查每个值的合理性，编译和运行统统正常，但是7并不是静态常量，这个判断没有意义。

另一个严重的问题，由于是用常数比较，不同类型的常量之间也可以进行比较，比如Color.RED == Week.MON，这样的情况是要检查出来的。



## enum的意义

为了让判断某个值在枚举的集合内，可以使用`enum`来定义枚举类。

```java
public class Main {
    public static void main(String[] args) {
        Weekday day = Weekday.SUN;
        if (day == Weekday.SAT || day == Weekday.SUN) {
            System.out.println("Work at home!");
        } else {
            System.out.println("Work at office!");
        }
    }
}

enum Weekday {
    SUN, MON, TUE, WED, THU, FRI, SAT;
}

```



## enum里的对象是唯一的吗

正常比较对象没人会用等号，都是用equals，因为等号比较的是地址。但是enum是个例外，因为enum中的对象在JVM中只有唯一实例。所以可以用等号比较。

基于这个理论，可以用enum玩出一些技巧来，比如用enum实现单例模式，因为enum本身就是一个**多例模式**。具体可以参考单例模式那篇。



## enum类和普通类的区别

没有任何区别。`enum`定义的类型就是`class`，只是它有几个特点。

1. 定义的`enum`类型总是继承自`java.lang.Enum`，且无法被继承
2. 只能定义出`enum`的实例，而无法通过`new`操作符创建`enum`的实例
3. 定义的每个实例都是引用类型的唯一实例
4. 可以将`enum`类型用于`switch`语句

**可以看出123的标准已经就是单例模式了。**





## enum实现单例模式

```java
public enum  EnumSingleton {
    INSTANCE;
    public EnumSingleton getInstance(){
        return INSTANCE;
    }
}
```



