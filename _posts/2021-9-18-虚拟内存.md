---
layout:     post
title:      虚拟内存
subtitle:   操作系统，漫漫长路
date:       2021-9-18
author:     Timer
header-img: img/the-first.png
catalog: false
tags:
    - OS




---

## 虚拟内存

OS里非常重要的一个技术，它让程序认为自己拥有连续可用的内存，而实际上，它在物理内存中可能是零散、不规则的，甚至部分暂存在磁盘，在需要的时候进行交换。每个进程，访问的其实都是虚拟内存，虚拟内存再映射成物理内存。  



## 内存分配

一个直接的想法是，将虚拟内存和物理内存地址一一对应映射。

实际的考虑一下，内存的访问单位是Byte，假设有一个32位的CPU，内存寻址的最大地址是2^32，需要四个字节来表示。虚拟内存+物理内存，那么某个Byte由虚拟内存到物理内存映射至少需要8个字节。那4G的内存条有1024 * 1024 * 1024 * 4 个Byte，光映射就得至少32G，那么直接一一映射必然不合理。





































