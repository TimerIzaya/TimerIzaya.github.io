---
layout:     post
title:      JVM工具记录（持续更新）
subtitle:   不监视JVM的高性能代码等于白瞎
date:       2021-10-26
author:     Timer
header-img: img/the-first.png
catalog: false
tags:
    - JVM


---

### 前言

​		自从打过两次性能优化比赛后，越来越觉得JVM工具的重要性，不然一切调试都是凭感觉，遇见问题处处是玄学。



## JPS( JVM Process Status )

列出正在运行的VM进程，显示主类（main方法在的类）名称以及LVMID（Local Virtual Machine Identifier)。

| 参数   | 作用                         |
| ------ | ---------------------------- |
| jps -q | 只输出LVMID                  |
| jps -m | 输出各个进程main方法的参数   |
| jps -l | 输出主类的全名（整个包路径） |
| jps -v | 输出进程启动时候的JVM参数    |

  



## Jstat( JVM Statistic Monitoring Tool )

主要检查三类统计数据：类加载、GC、运行期编译情况。具体见help。

  

## HSDB	

```shell
E:\Program Files\Java\jdk1.8.0_181\lib>java -cp ./sa-jdi.jar sun.jvm.hotspot.HSDB
```



## JInfo

主要用于实时查看和调整JVM参数。具体见help。

  



## JMap

获得heap dump，再用其他工具解析heap dump。可以用System.in.read()卡一下程序再获得快照。

> jmap -dump:format=b,file=(name).bin (LVMID)

  



## JStack

用于生成当前的线程快照，也就是当前线程的堆栈集合。通常用来定位线程停顿的原因，比如死锁，死循环，长时间挂起等等。









